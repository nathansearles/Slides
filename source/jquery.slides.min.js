/*
  SlidesJS 3.0.4 http://slidesjs.com
  (c) 2013 by Nathan Searles http://nathansearles.com
  Apache License: http://www.apache.org/licenses/LICENSE-2.0
  
  fork - Added support for Windows Phone 8 and Windows 8 touch devices 
  
*/
(function(){(function(e,t,n){var r,i,s;s="slidesjs";i={width:940,height:528,start:1,navigation:{active:true,effect:"slide"},pagination:{active:true,effect:"slide"},play:{active:false,effect:"slide",interval:5e3,auto:false,swap:true,pauseOnHover:false,restartDelay:2500},effect:{slide:{speed:500},fade:{speed:300,crossfade:true}},callback:{loaded:function(){},start:function(){},complete:function(){}}};r=function(){function t(t,n){this.element=t;this.options=e.extend(true,{},i,n);this._defaults=i;this._name=s;this.init()}return t}();r.prototype.init=function(){var r,i,s,o,u,a,f=this;r=e(this.element);this.data=e.data(this);e.data(this,"animating",false);e.data(this,"total",r.children().not(".slidesjs-navigation",r).length);e.data(this,"current",this.options.start-1);e.data(this,"vendorPrefix",this._getVendorPrefix());if(t.navigator.msPointerEnabled||typeof TouchEvent!=="undefined"){e.data(this,"touch",true);this.options.effect.slide.speed=this.options.effect.slide.speed/2}r.css({overflow:"hidden"});r.slidesContainer=r.children().not(".slidesjs-navigation",r).wrapAll("<div class='slidesjs-container'>",r).parent().css({overflow:"hidden",position:"relative"});e(".slidesjs-container",r).wrapInner("<div class='slidesjs-control'>",r).children();e(".slidesjs-control",r).css({position:"relative",left:0});e(".slidesjs-control",r).children().addClass("slidesjs-slide").css({position:"absolute",top:0,left:0,width:"100%",zIndex:0,display:"none",webkitBackfaceVisibility:"hidden","-ms-touch-action":"none"});e.each(e(".slidesjs-control",r).children(),function(t){var n;n=e(this);return n.attr("slidesjs-index",t)});if(this.data.touch){var l={start:"touchstart",move:"touchmove",end:"touchend"};if(t.navigator.pointerEnabled){l={start:"pointerdown",move:"pointermove",end:"pointerup"}}else if(t.navigator.msPointerEnabled){l={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}}n.body.addEventListener(l.start,function(e){return f._touchstart(e)});n.body.addEventListener(l.move,function(e){return f._touchmove(e)});n.body.addEventListener(l.end,function(e){return f._touchend(e)})}r.fadeIn(0);this.update();if(this.data.touch){this._setuptouch()}e(".slidesjs-control",r).children(":eq("+this.data.current+")").eq(0).fadeIn(0,function(){return e(this).css({zIndex:10})});if(this.options.navigation.active){u=e("<a>",{"class":"slidesjs-previous slidesjs-navigation",href:"#",title:"Previous",text:"Previous"}).appendTo(r);i=e("<a>",{"class":"slidesjs-next slidesjs-navigation",href:"#",title:"Next",text:"Next"}).appendTo(r)}e(".slidesjs-next",r).click(function(e){e.preventDefault();f.stop(true);return f.next(f.options.navigation.effect)});e(".slidesjs-previous",r).click(function(e){e.preventDefault();f.stop(true);return f.previous(f.options.navigation.effect)});if(this.options.play.active){o=e("<a>",{"class":"slidesjs-play slidesjs-navigation",href:"#",title:"Play",text:"Play"}).appendTo(r);a=e("<a>",{"class":"slidesjs-stop slidesjs-navigation",href:"#",title:"Stop",text:"Stop"}).appendTo(r);o.click(function(e){e.preventDefault();return f.play(true)});a.click(function(e){e.preventDefault();return f.stop(true)});if(this.options.play.swap){a.css({display:"none"})}}if(this.options.pagination.active){s=e("<ul>",{"class":"slidesjs-pagination"}).appendTo(r);e.each(new Array(this.data.total),function(t){var n,r;n=e("<li>",{"class":"slidesjs-pagination-item"}).appendTo(s);r=e("<a>",{href:"#","data-slidesjs-item":t,html:t+1}).appendTo(n);return r.click(function(t){t.preventDefault();f.stop(true);return f.goto(e(t.currentTarget).attr("data-slidesjs-item")*1+1)})})}e(t).bind("resize",function(){return f.update()});this._setActive();if(this.options.play.auto){this.play()}return this.options.callback.loaded(this.options.start)};r.prototype._setActive=function(t){var n,r;n=e(this.element);this.data=e.data(this);r=t>-1?t:this.data.current;e(".active",n).removeClass("active");return e(".slidesjs-pagination li:eq("+r+") a",n).addClass("active")};r.prototype.update=function(){var t,n,r;t=e(this.element);this.data=e.data(this);e(".slidesjs-control",t).children(":not(:eq("+this.data.current+"))").css({display:"none",left:0,zIndex:0});r=t.width();n=this.options.height/this.options.width*r;this.options.width=r;this.options.height=n;return e(".slidesjs-control, .slidesjs-container",t).css({width:r,height:n})};r.prototype.next=function(t){var n;n=e(this.element);this.data=e.data(this);e.data(this,"direction","next");if(t===void 0){t=this.options.navigation.effect}if(t==="fade"){return this._fade()}else{return this._slide()}};r.prototype.previous=function(t){var n;n=e(this.element);this.data=e.data(this);e.data(this,"direction","previous");if(t===void 0){t=this.options.navigation.effect}if(t==="fade"){return this._fade()}else{return this._slide()}};r.prototype.goto=function(t){var n,r;n=e(this.element);this.data=e.data(this);if(r===void 0){r=this.options.pagination.effect}if(t>this.data.total){t=this.data.total}else if(t<1){t=1}if(typeof t==="number"){if(r==="fade"){return this._fade(t)}else{return this._slide(t)}}else if(typeof t==="string"){if(t==="first"){if(r==="fade"){return this._fade(0)}else{return this._slide(0)}}else if(t==="last"){if(r==="fade"){return this._fade(this.data.total)}else{return this._slide(this.data.total)}}}};r.prototype._setuptouch=function(){var t,n,r,i;t=e(this.element);this.data=e.data(this);i=e(".slidesjs-control",t);n=this.data.current+1;r=this.data.current-1;if(r<0){r=this.data.total-1}if(n>this.data.total-1){n=0}i.children(":eq("+n+")").css({display:"block",left:this.options.width});return i.children(":eq("+r+")").css({display:"block",left:-this.options.width})};r.prototype._touchstart=function(t){var n,r;n=e(this.element);this.data=e.data(this);r=t.type=="touchstart"?t.touches[0]:t;this._setuptouch();e.data(this,"touchtimer",Number(new Date));e.data(this,"touchstartx",r.pageX);e.data(this,"touchstarty",r.pageY);return t.stopPropagation()};r.prototype._touchend=function(t){var n,r,i,s,o,u,a,f=this;n=e(this.element);this.data=e.data(this);u=t.type=="touchend"?t.touches[0]:t;s=e(".slidesjs-control",n);if(s.position().left>this.options.width*.5||s.position().left>this.options.width*.1&&Number(new Date)-this.data.touchtimer<250){e.data(this,"direction","previous");this._slide()}else if(s.position().left<-(this.options.width*.5)||s.position().left<-(this.options.width*.1)&&Number(new Date)-this.data.touchtimer<250){e.data(this,"direction","next");this._slide()}else{i=this.data.vendorPrefix;a=i+"Transform";r=i+"TransitionDuration";o=i+"TransitionTimingFunction";s[0].style[a]="translateX(0px)";s[0].style[r]=this.options.effect.slide.speed*.85+"ms"}s.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){i=f.data.vendorPrefix;a=i+"Transform";r=i+"TransitionDuration";o=i+"TransitionTimingFunction";s[0].style[a]="";s[0].style[r]="";return s[0].style[o]=""});return t.stopPropagation()};r.prototype._touchmove=function(t){var n,r,i,s,o;n=e(this.element);this.data=e.data(this);s=t.type=="touchmove"?t.touches[0]:t;r=this.data.vendorPrefix;i=e(".slidesjs-control",n);o=r+"Transform";e.data(this,"scrolling",Math.abs(s.pageX-this.data.touchstartx)<Math.abs(s.pageY-this.data.touchstarty));if(!this.data.animating&&!this.data.scrolling){t.preventDefault();this._setuptouch();i[0].style[o]="translateX("+(s.pageX-this.data.touchstartx)+"px)"}return t.stopPropagation()};r.prototype.play=function(t){var n,r,i,s=this;n=e(this.element);this.data=e.data(this);if(!this.data.playInterval){if(t){r=this.data.current;this.data.direction="next";if(this.options.play.effect==="fade"){this._fade()}else{this._slide()}}e.data(this,"playInterval",setInterval(function(){r=s.data.current;s.data.direction="next";if(s.options.play.effect==="fade"){return s._fade()}else{return s._slide()}},this.options.play.interval));i=e(".slidesjs-container",n);if(this.options.play.pauseOnHover){i.unbind();i.bind("mouseenter",function(){return s.stop()});i.bind("mouseleave",function(){if(s.options.play.restartDelay){return e.data(s,"restartDelay",setTimeout(function(){return s.play(true)},s.options.play.restartDelay))}else{return s.play()}})}e.data(this,"playing",true);e(".slidesjs-play",n).addClass("slidesjs-playing");if(this.options.play.swap){e(".slidesjs-play",n).hide();return e(".slidesjs-stop",n).show()}}};r.prototype.stop=function(t){var n;n=e(this.element);this.data=e.data(this);clearInterval(this.data.playInterval);if(this.options.play.pauseOnHover&&t){e(".slidesjs-container",n).unbind()}e.data(this,"playInterval",null);e.data(this,"playing",false);e(".slidesjs-play",n).removeClass("slidesjs-playing");if(this.options.play.swap){e(".slidesjs-stop",n).hide();return e(".slidesjs-play",n).show()}};r.prototype._slide=function(t){var n,r,i,s,o,u,a,f,l,c,h=this;n=e(this.element);this.data=e.data(this);if(!this.data.animating&&t!==this.data.current+1){e.data(this,"animating",true);r=this.data.current;if(t>-1){t=t-1;c=t>r?1:-1;i=t>r?-this.options.width:this.options.width;o=t}else{c=this.data.direction==="next"?1:-1;i=this.data.direction==="next"?-this.options.width:this.options.width;o=r+c}if(o===-1){o=this.data.total-1}if(o===this.data.total){o=0}this._setActive(o);a=e(".slidesjs-control",n);if(t>-1){a.children(":not(:eq("+r+"))").css({display:"none",left:0,zIndex:0})}a.children(":eq("+o+")").css({display:"block",left:c*this.options.width,zIndex:10});this.options.callback.start(r+1);if(this.data.vendorPrefix){u=this.data.vendorPrefix;l=u+"Transform";s=u+"TransitionDuration";f=u+"TransitionTimingFunction";a[0].style[l]="translateX("+i+"px)";a[0].style[s]=this.options.effect.slide.speed+"ms";return a.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){a[0].style[l]="";a[0].style[s]="";a.children(":eq("+o+")").css({left:0});a.children(":eq("+r+")").css({display:"none",left:0,zIndex:0});e.data(h,"current",o);e.data(h,"animating",false);a.unbind("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd");a.children(":not(:eq("+o+"))").css({display:"none",left:0,zIndex:0});if(h.data.touch){h._setuptouch()}return h.options.callback.complete(o+1)})}else{return a.stop().animate({left:i},this.options.effect.slide.speed,function(){a.css({left:0});a.children(":eq("+o+")").css({left:0});return a.children(":eq("+r+")").css({display:"none",left:0,zIndex:0},e.data(h,"current",o),e.data(h,"animating",false),h.options.callback.complete(o+1))})}}};r.prototype._fade=function(t){var n,r,i,s,o,u=this;n=e(this.element);this.data=e.data(this);if(!this.data.animating&&t!==this.data.current+1){e.data(this,"animating",true);r=this.data.current;if(t){t=t-1;o=t>r?1:-1;i=t}else{o=this.data.direction==="next"?1:-1;i=r+o}if(i===-1){i=this.data.total-1}if(i===this.data.total){i=0}this._setActive(i);s=e(".slidesjs-control",n);s.children(":eq("+i+")").css({display:"none",left:0,zIndex:10});this.options.callback.start(r+1);if(this.options.effect.fade.crossfade){s.children(":eq("+this.data.current+")").stop().fadeOut(this.options.effect.fade.speed);return s.children(":eq("+i+")").stop().fadeIn(this.options.effect.fade.speed,function(){s.children(":eq("+i+")").css({zIndex:0});e.data(u,"animating",false);e.data(u,"current",i);return u.options.callback.complete(i+1)})}else{return s.children(":eq("+r+")").stop().fadeOut(this.options.effect.fade.speed,function(){s.children(":eq("+i+")").stop().fadeIn(u.options.effect.fade.speed,function(){return s.children(":eq("+i+")").css({zIndex:10})});e.data(u,"animating",false);e.data(u,"current",i);return u.options.callback.complete(i+1)})}}};r.prototype._getVendorPrefix=function(){var e,t,r,i,s;e=n.body||n.documentElement;r=e.style;i="transition";s=["Moz","Webkit","Khtml","O","ms"];i=i.charAt(0).toUpperCase()+i.substr(1);t=0;while(t<s.length){if(typeof r[s[t]+i]==="string"){return s[t]}t++}return false};return e.fn[s]=function(t){return this.each(function(){if(!e.data(this,"plugin_"+s)){return e.data(this,"plugin_"+s,new r(this,t))}})}})(jQuery,window,document)}).call(this)
